define(function(t,e,r){function a(t,e){if(e=e||"string","string"!=typeof e)throw Error("type must be string");return Object.prototype.toString.call(t).slice(8,-1).toLowerCase()===e.toLowerCase()}var n=t("jquery"),o=t("underscore"),i=[40,60,80,100,120,160,180,200,240,250,300,310,320,360,400,460,600],s=Array("Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Spt","Oct","Nov","Dec"),l=304,c={};c.TPL={templates:{},loadTemplates:function(t,e){if(a(t,"string")&&(t=[t]),!a(t,"array"))throw Error("templateName must be array or string");var r=this,o=t.length,i=function(a){var s=t[a];void 0===r.templates[s]?n.get("./static/src/javascripts/tpls/"+s+".html",function(t){r.templates[s]=t,o>++a?i(a):e()}):o>++a?i(a):e()};i(0)},get:function(t){return this.templates[t]}},c.WaterFall=function(t){this.col=t,this.water=[],this.init()},c.WaterFall.prototype.init=function(){for(var t=this.col,e=0;t>e;e++)this.water[e]=0},c.WaterFall.prototype.getMinIndex=function(){return o.indexOf(this.water,o.min(this.water))},c.WaterFall.prototype.getMaxIndex=function(){return o.indexOf(this.water,o.max(this.water))},c.WaterFall.prototype.pushItem=function(t){var e=this;return e.water[e.getMinIndex()]+=t,e.water},c.WaterFall.prototype.getParam=function(){return{col:this.col,water:this.water}},c.WaterFall.prototype.makeColHtml=function(){for(var t="",e=0;this.col>e;e++){var r="waterCol";0===e?r+=" firstCol":e===this.col-1&&(r+=" lastedCol"),t+='<div class="'+r+'"></div>'}return t},c.Date={getEnglishMonth:function(t){return s[t]},getDate:function(t,e){t=t||"/",e=e||0;var r=(new Date).getTime();return r=new Date(r+1e3*60*60*24*e),r.getFullYear()+t+(1+r.getMonth())+t+r.getDate()}},c.TRANSFORM={translate3d:function(t,e,r){t=n(t),r=r||0,e=n.extend({x:0,y:0,z:0},e);var a=t[0].style;a&&(a.MozTransitionDuration=a.msTransitionDuration=a.OTransitionDuration=a.transitionDuration=r+"ms",a.webkitTransform="translate("+e.x+"px,"+e.y+"px)"+"translateZ("+e.z+"px)",a.msTransform=a.MozTransform=a.OTransform="translate("+e.x+"px,"+e.y+"px)"+"translateZ("+e.z+"px)")}},c.LOAD={show:function(){n("#gloabLoading").stop(!0,!0).fadeIn()},hide:function(){n("#gloabLoading").stop(!0,!0).fadeOut()}},c.getWaterFalColWidth=function(){return l},c.setWaterFalColWidth=function(t){l=t},c.OS={detect:function(t){var e=this.os={},r=this.browser={},a=t.match(/WebKit\/([\d.]+)/),n=t.match(/(Android)\s+([\d.]+)/),o=t.match(/(iPad).*OS\s([\d_]+)/),i=!o&&t.match(/(iPhone\sOS)\s([\d_]+)/),s=t.match(/(webOS|hpwOS)[\s\/]([\d.]+)/),l=s&&t.match(/TouchPad/),c=t.match(/Kindle\/([\d.]+)/),h=t.match(/Silk\/([\d._]+)/),d=t.match(/(BlackBerry).*Version\/([\d.]+)/),u=t.match(/(BB10).*Version\/([\d.]+)/),m=t.match(/(RIM\sTablet\sOS)\s([\d.]+)/),p=t.match(/PlayBook/),f=t.match(/Chrome\/([\d.]+)/)||t.match(/CriOS\/([\d.]+)/),g=t.match(/Firefox\/([\d.]+)/);return(r.webkit=!!a)&&(r.version=a[1]),n&&(e.android=!0,e.version=n[2]),i&&(e.ios=e.iphone=!0,e.version=i[2].replace(/_/g,".")),o&&(e.ios=e.ipad=!0,e.version=o[2].replace(/_/g,".")),s&&(e.webos=!0,e.version=s[2]),l&&(e.touchpad=!0),d&&(e.blackberry=!0,e.version=d[2]),u&&(e.bb10=!0,e.version=u[2]),m&&(e.rimtabletos=!0,e.version=m[2]),p&&(r.playbook=!0),c&&(e.kindle=!0,e.version=c[1]),h&&(r.silk=!0,r.version=h[1]),!h&&e.android&&t.match(/Kindle Fire/)&&(r.silk=!0),f&&(r.chrome=!0,r.version=f[1]),g&&(r.firefox=!0,r.version=g[1]),e.tablet=!!(o||p||n&&!t.match(/Mobile/)||g&&t.match(/Tablet/)),e.phone=!(e.tablet||!(n||i||s||d||u||f&&t.match(/Android/)||f&&t.match(/CriOS\/([\d.]+)/)||g&&t.match(/Mobile/))),{os:e,browser:r}}},c.URL={getHash:function(){var t=window.location.hash,e="";return t&&(e=t.slice(1),e=e.split("/")),e}},c.TOOL={getPicSize:function(){for(var t=c.getWaterFalColWidth(),e=i[0],r=1,a=i.length;a>r;r++)if(i[r]>=t){e=i[r];break}return e}},r.exports=c});