define(function(e,t,n){var i=e("jqmobile"),r=e("backbone"),o=i(".header"),a=i(".barNav"),s=e("./journal"),l=e("../vendors/util"),u=l.OS.detect(navigator.userAgent),c="none",d=i(window),h=!1;u.os.android&&3>parseInt(u.os.version.slice(0,1))&&(h=!0,c="none");var f={index:{loaded:!1,query:{type:"index"},el:"#indexContent",rzList:[]},newest:{loaded:!1,query:{type:"hot"},el:"#newestContent",rzList:[]},lastest:{loaded:!1,query:{type:"new"},el:"#lastestContent",rzList:[]}},p=r.View.extend({initialize:function(){var e=this,t=l.URL.getHash();t?e.showPage(t[0]):e.showPage("index"),e.hashchange(),e.updateBar()},el:"body",events:{"tap .barNav":"changeNav"},render:function(){return this},changeNav:function(e){var t=this,n=i(e.target);return n=n.hasClass("barNav")?n:n.parent(),t.showPage(n.attr("klg-page-id")),!1},showPage:function(e){f[e].loaded?f[e].rzList[0].refreshView():(f[e].loaded=!0,f[e].rzList.push(new s({el:f[e].el,query:f[e].query}))),i.mobile.changePage("#"+e,{transition:c,changeHash:!0})},updateBar:function(){var e=i(a[0]),t=l.URL.getHash();t&&t[0]&&(e=a.filter("."+t[0])),e.length||(e=i(a[0])),a.removeClass("selected"),e.addClass("selected"),o.text(e.attr("klg-page-title"))},hashchange:function(){var e=this;d.hashchange(function(){e.updateBar()})}});n.exports=p});