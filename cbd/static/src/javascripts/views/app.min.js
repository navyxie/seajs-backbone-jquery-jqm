define(function(e,t,n){var o=e("jqmobile"),a=e("backbone"),i=o(".header"),r=o(".barNav"),l=e("./journal"),s=e("../vendors/util"),d=s.OS.detect(navigator.userAgent),c="none",u=o(window),h=!1;d.os.android&&3>parseInt(d.os.version.slice(0,1))&&(h=!0,c="none");var g={index:{loaded:!1,query:{type:"index"},el:"#indexContent",rzList:[]},newest:{loaded:!1,query:{type:"hot"},el:"#newestContent",rzList:[]},lastest:{loaded:!1,query:{type:"new"},el:"#lastestContent",rzList:[]}},m=a.View.extend({initialize:function(){var e=this,t=s.URL.getHash();t?e.showPage(t[0]):e.showPage("index"),e.hashchange(),e.updateBar()},el:"body",events:{"tap .barNav":"changeNav"},render:function(){return this},changeNav:function(e){var t=this,n=o(e.target);return n=n.hasClass("barNav")?n:n.parent(),t.showPage(n.attr("klg-page-id")),!1},showPage:function(e){g[e].loaded?g[e].rzList[0].refreshView():(g[e].loaded=!0,g[e].rzList.push(new l({el:g[e].el,query:g[e].query}))),o.mobile.changePage("#"+e,{transition:c,changeHash:!0})},updateBar:function(){var e=o(r[0]),t=s.URL.getHash();t&&t[0]&&(e=r.filter("."+t[0])),e.length||(e=o(r[0])),r.removeClass("selected"),e.addClass("selected"),i.text(e.attr("klg-page-title"))},hashchange:function(){var e=this;u.hashchange(function(){e.updateBar()})}});n.exports=m});