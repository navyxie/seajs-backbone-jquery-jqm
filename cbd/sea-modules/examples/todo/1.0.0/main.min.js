define("examples/todo/1.0.0/main",["backbone","./views/app","$","underscore","./views/todos","./common","./collections/todos","./vendor/backbone.localStorage","./models/todo","./routers/router"],function(e){var t=e("backbone"),n=e("./views/app"),r=e("./routers/router");new r,t.history.start(),new n}),define("examples/todo/1.0.0/views/app",["$","underscore","backbone","examples/todo/1.0.0/views/todos","examples/todo/1.0.0/common","examples/todo/1.0.0/collections/todos","examples/todo/1.0.0/models/todo"],function(e,t,n){var r,i,o,a,s,c=e("$"),u=e("underscore");r=e("backbone"),i=e("examples/todo/1.0.0/views/todos"),o=e("examples/todo/1.0.0/collections/todos"),a=e("examples/todo/1.0.0/common"),s=r.View.extend({el:"#todoapp",statsTemplate:u.template(c("#stats-template").html()),events:{"keypress #new-todo":"createOnEnter","click #clear-completed":"clearCompleted","click #toggle-all":"toggleAllComplete"},initialize:function(){this.allCheckbox=this.$("#toggle-all")[0],this.$input=this.$("#new-todo"),this.$footer=this.$("#footer"),this.$main=this.$("#main"),this.listenTo(o,"add",this.addOne),this.listenTo(o,"reset",this.addAll),this.listenTo(o,"change:completed",this.filterOne),this.listenTo(o,"filter",this.filterAll),this.listenTo(o,"all",this.render),o.fetch()},render:function(){var e=o.completed().length,t=o.remaining().length;o.length?(this.$main.show(),this.$footer.show(),this.$footer.html(this.statsTemplate({completed:e,remaining:t})),this.$("#filters li a").removeClass("selected").filter('[href="#/'+(a.TodoFilter||"")+'"]').addClass("selected")):(this.$main.hide(),this.$footer.hide()),this.allCheckbox.checked=!t},addOne:function(e){var t=new i({model:e});c("#todo-list").append(t.render().el)},addAll:function(){this.$("#todo-list").html(""),o.each(this.addOne,this)},filterOne:function(e){e.trigger("visible")},filterAll:function(){o.each(this.filterOne,this)},newAttributes:function(){return{title:this.$input.val().trim(),order:o.nextOrder(),completed:!1}},createOnEnter:function(e){e.which===a.ENTER_KEY&&this.$input.val().trim()&&(o.create(this.newAttributes()),this.$input.val(""))},clearCompleted:function(){return u.invoke(o.completed(),"destroy"),!1},toggleAllComplete:function(){var e=this.allCheckbox.checked;o.each(function(t){t.save({completed:e})})}}),n.exports=s}),define("examples/todo/1.0.0/views/todos",["backbone","examples/todo/1.0.0/common","$","underscore"],function(e,t,n){var r,i,o;r=e("backbone"),i=e("examples/todo/1.0.0/common");var a=e("$"),s=e("underscore");o=r.View.extend({tagName:"li",template:s.template(a("#item-template").html()),events:{"click .toggle":"toggleCompleted","dblclick label":"edit","click .destroy":"clear","keypress .edit":"updateOnEnter","blur .edit":"close"},initialize:function(){this.listenTo(this.model,"change",this.render),this.listenTo(this.model,"destroy",this.remove),this.listenTo(this.model,"visible",this.toggleVisible)},render:function(){return this.$el.html(this.template(this.model.toJSON())),this.$el.toggleClass("completed",this.model.get("completed")),this.toggleVisible(),this.$input=this.$(".edit"),this},toggleVisible:function(){this.$el.toggleClass("hidden",this.isHidden())},isHidden:function(){this.model.get("completed")},toggleCompleted:function(){this.model.toggle()},edit:function(){this.$el.addClass("editing"),this.$input.focus()},close:function(){var e=this.$input.val().trim();e?this.model.save({title:e}):this.clear(),this.$el.removeClass("editing")},updateOnEnter:function(e){e.which===i.ENTER_KEY&&this.close()},clear:function(){this.model.destroy()}}),n.exports=o}),define("examples/todo/1.0.0/common",[],{TodoFilter:"",ENTER_KEY:13}),define("examples/todo/1.0.0/collections/todos",["backbone","$","underscore","examples/todo/1.0.0/models/todo"],function(e,t,n){var r,i,o;r=e("backbone"),e("examples/todo/1.0.0/vendor/backbone.localStorage"),e("$"),e("underscore"),i=e("examples/todo/1.0.0/models/todo"),o=r.Collection.extend({model:i,localStorage:new r.LocalStorage("todos-backbone"),completed:function(){return this.filter(function(e){return e.get("completed")})},remaining:function(){return this.without.apply(this,this.completed())},nextOrder:function(){return this.length?this.last().get("order")+1:1},comparator:function(e){return e.get("order")}}),n.exports=new o}),define("examples/todo/1.0.0/vendor/backbone.localStorage",["underscore","$","backbone"],function(e){function t(){return(0|65536*(1+Math.random())).toString(16).substring(1)}function n(){return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()}var r=e("underscore"),i=e("$"),o=e("backbone");return o.LocalStorage=window.Store=function(e){this.name=e;var t=this.localStorage().getItem(this.name);this.records=t&&t.split(",")||[]},r.extend(o.LocalStorage.prototype,{save:function(){this.localStorage().setItem(this.name,this.records.join(","))},create:function(e){return e.id||(e.id=n(),e.set(e.idAttribute,e.id)),this.localStorage().setItem(this.name+"-"+e.id,JSON.stringify(e)),this.records.push(""+e.id),this.save(),this.find(e)},update:function(e){return this.localStorage().setItem(this.name+"-"+e.id,JSON.stringify(e)),r.include(this.records,""+e.id)||this.records.push(""+e.id),this.save(),this.find(e)},find:function(e){return this.jsonData(this.localStorage().getItem(this.name+"-"+e.id))},findAll:function(){return r(this.records).chain().map(function(e){return this.jsonData(this.localStorage().getItem(this.name+"-"+e))},this).compact().value()},destroy:function(e){return e.isNew()?!1:(this.localStorage().removeItem(this.name+"-"+e.id),this.records=r.reject(this.records,function(t){return t===""+e.id}),this.save(),e)},localStorage:function(){return localStorage},jsonData:function(e){return e&&JSON.parse(e)}}),o.LocalStorage.sync=window.Store.sync=o.localSync=function(e,t,n){var r,a,s=t.localStorage||t.collection.localStorage,c=i.Deferred&&i.Deferred();try{switch(e){case"read":r=void 0!=t.id?s.find(t):s.findAll();break;case"create":r=s.create(t);break;case"update":r=s.update(t);break;case"delete":r=s.destroy(t)}}catch(u){a=u.code===DOMException.QUOTA_EXCEEDED_ERR&&0===window.localStorage.length?"Private browsing is unsupported":u.message}return r?(n&&n.success&&("0.9.10"===o.VERSION?n.success(t,r,n):n.success(r)),c&&c.resolve(r)):(a=a?a:"Record Not Found",n&&n.error&&("0.9.10"===o.VERSION?n.error(t,a,n):n.error(a)),c&&c.reject(a)),n&&n.complete&&n.complete(r),c&&c.promise()},o.ajaxSync=o.sync,o.getSyncMethod=function(e){return e.localStorage||e.collection&&e.collection.localStorage?o.localSync:o.ajaxSync},o.sync=function(e,t,n){return o.getSyncMethod(t).apply(this,[e,t,n])},o.LocalStorage}),define("examples/todo/1.0.0/models/todo",["backbone"],function(e,t,n){var r=e("backbone"),i=r.Model.extend({defaults:{title:"",completed:!1},toggle:function(){this.save({completed:!this.get("completed")})}});n.exports=i}),define("examples/todo/1.0.0/routers/router",["backbone","examples/todo/1.0.0/collections/todos","$","underscore","examples/todo/1.0.0/models/todo","examples/todo/1.0.0/common"],function(e,t,n){var r,i,o,a;r=e("backbone"),o=e("examples/todo/1.0.0/collections/todos"),a=e("examples/todo/1.0.0/common"),i=r.Router.extend({routes:{"*filter":"setFilter"},setFilter:function(e){a.TodoFilter=e&&e.trim()||"",o.trigger("filter")}}),n.exports=i});