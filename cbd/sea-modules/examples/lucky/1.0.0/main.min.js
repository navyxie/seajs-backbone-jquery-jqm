document.attachEvent&&alert("这个例子不支持 Old IE 哦"),define("examples/lucky/1.0.0/main",["./data","./lucky","jquery","jquery-easing","./user"],function(e){var t=e("./data"),n=e("./lucky");n.init(t)}),define("examples/lucky/1.0.0/data",[],["马云","马化腾","李彦宏","周鸿祎","玉伯","沉鱼","丹侠","贯高","邵帅","陆辉","南伯","崔护","偏右","远尘","臻儿","左宜","张初尘","初成","琼羽","异草","闭月","周爱民","陈皓","winter","army","hax","老赵","sofish","罗龙浩"]),define("examples/lucky/1.0.0/lucky",["jquery","jquery-easing","examples/lucky/1.0.0/user"],function(e,t,n){function r(e,t){return Math.sqrt((e.x-t.x)*(e.x-t.x)+(e.y-t.y)*(e.y-t.y))}function i(e,t){return r(e,t)<=(e.width+t.width)/2}function o(e,t){var n=t.y-e.y,i=t.x-e.x,o=r(e,t),a=Math.ceil(((e.width+t.width)/2-o)/c),s=n>0?Math.ceil(a*n/o):Math.floor(a*n/o),u=i>0?Math.ceil(a*i/o):Math.floor(a*i/o);e.lucky?(t._xMove+=2*u,t._yMove+=2*s):t.lucky?(e._xMove+=-2*u,e._yMove+=-2*s):(e._yMove+=-1*s,t._yMove+=s,e._xMove+=-1*u,t._xMove+=u)}var a=e("jquery");e("jquery-easing");var s=e("examples/lucky/1.0.0/user"),u=100,c=4;n.exports={users:[],init:function(e){a("#container").css("background","none"),this.data=e,this.users=e.map(function(t){return new s(t,e[t])}),this._bindUI()},_bindUI:function(){function e(){"start"===n.getAttribute("data-action")?(n.setAttribute("data-action","stop"),n.innerHTML=n.getAttribute("data-text-stop"),t.start()):(n.setAttribute("data-action","start"),n.innerHTML=n.getAttribute("data-text-start"),t.stop())}var t=this,n=document.querySelector("#go");n.innerHTML=n.getAttribute("data-text-start"),n.addEventListener("click",e,!1),a("#lucky-balls").on("click","li",function(e){var n=a(e.target),r=n.text();t.addItem(r),t.hit(),n.remove()}),a("#balls").on("click","li",function(e){for(var n=a(e.target),r=n.text(),i=0;t.users.length>i;i++){var o=t.users[i];if(o.name===r){t.moveLucky(),t.luckyUser!==o&&t.setLucky(o);break}}}),document.addEventListener("keydown",function(n){"32"==n.keyCode?e():"27"==n.keyCode&&(t.moveLucky(),a("#lucky-balls li").eq(0).click())},!1)},start:function(){this.timer&&clearTimeout(this.timer),this.moveLucky(),this.users.forEach(function(e){e.start()})},stop:function(){var e=this.users,t=0,n=e[0];e.forEach(function(e){e.stop(),e.zIndex>t&&(n=e,t=e.zIndex)}),n.bang(),this.hit(),this.luckyUser=n},removeItem:function(e){for(var t=0;this.users.length>t;t++){var n=this.users[t];n===e&&this.users.splice(t,1)}},addItem:function(e){this.users.push(new s(e))},moveLucky:function(){var e=this.luckyUser;e&&(e.el[0].style.cssText="",e.el.prependTo("#lucky-balls"),this.removeItem(e),this.luckyUser=null)},setLucky:function(e){this.users.forEach(function(e){e.stop()}),this.luckyUser=e,e.bang(),this.hit()},hit:function(){var e=this,t=0,n=this.users;n.forEach(function(e){e.beginHit()});for(var r=0;n.length>r;r++)for(var a=r+1;n.length>a;a++)i(n[r],n[a])&&(o(n[r],n[a]),t++);n.forEach(function(e){e.hitMove()}),t>0&&(this.timer=setTimeout(function(){e.hit()},u))}}}),define("examples/lucky/1.0.0/user",["jquery"],function(e,t,n){function r(e,t){this.name=e,this.options=t||{},this.el=null,this.width=0,this.height=0,this.left=0,this.top=0,this.x=0,this.y=0,this.moving=!1,this.lucky=!1,this.createEl(),this.move()}function i(e,t){return e=e||0,t=t||1,Math.floor(Math.random()*(t-e+1)+e)}var o=e("jquery"),a=500,s=900,u=60,c=60,l=200,f=200,d=100,h=100,p=500,v=500;n.exports=r,r.prototype.createEl=function(){this.el=o("<li>"+this.name+"</li>").appendTo("#balls"),this.width=this.el.width(),this.height=this.el.height()},r.prototype.move=function(e){this.left=i(0,s-this.width),this.top=i(0,a-this.height),this.zIndex=i(0,d),this.reflow(e)},r.prototype.reflow=function(e,t){this.x=this.left+this.width/2,this.y=this.top+this.height/2,this.el[0].style.zIndex=this.zIndex,t?(this.el[0].style.left=this.left,this.el[0].style.top=this.top):this.el.animate({left:this.left,top:this.top},i(h,p),"easeOutBack",e)},r.prototype.start=function(){this.reset(),this.moving=!0,this.autoMove()},r.prototype.reset=function(){this.el.stop(!0,!0),this.lucky=!1,this.el[0].className="",this.el[0].style.width=u+"px",this.el[0].style.height=c+"px",this.width=this.el.width(),this.height=this.el.height(),this._maxTop=a-this.height,this._maxLeft=s-this.width},r.prototype.autoMove=function(){var e=this;this.moving&&this.move(function(){e.autoMove()})},r.prototype.stop=function(){this.el.stop(!0,!0),this.moving=!1},r.prototype.bang=function(){this.lucky=!0,this.el[0].className="selected",this.width=l,this.height=f,this.left=(s-this.width)/2,this.top=(a-this.height)/2,this.el.animate({left:this.left,top:this.top,width:this.width,height:this.height},v)},r.prototype.beginHit=function(){this._xMove=0,this._yMove=0},r.prototype.hitMove=function(){this.left+=this._xMove,this.top+=this._yMove,this.top=0>this.top?0:this.top>this._maxTop?this._maxTop:this.top,this.left=0>this.left?0:this.left>this._maxLeft?this._maxLeft:this.left,this.reflow(null,!1)}});